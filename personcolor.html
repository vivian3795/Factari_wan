<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>個人頁面</title>
    <!--成就的北中南東progress-->
    <link rel="stylesheet" href="css/test.css" type="text/css">
	<!--成就的北中南東progress-->

	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	<link rel="stylesheet" href="css/ammap.css" type="text/css">
	<script src="js/ammap.js" type="text/javascript"></script>
	<script src="js/taiwanHigh.js" type="text/javascript"></script>
	<!-- Custom styles for this template -->
    <link href="https://getbootstrap.com/examples/carousel/carousel.css" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="https://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="https://getbootstrap.com/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="https://getbootstrap.com/examples/jumbotron-narrow/jumbotron-narrow.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="https://getbootstrap.com/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	 <script type='text/javascript' 
            src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.js'></script>   
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />   
	<link rel="stylesheet" media="all" href="https://d3kjtz7uyul5bi.cloudfront.net/assets/application-69965045c910c69a67548a599c43b364a80f9b2aa0d70b7a9f9add3ad7a83641.css" />
	<style>
		body,input { padding-top: 100px;font-size: 9pt; font-family:Microsoft JhengHei;}
		#o-wrapper {z-index:0;}
    </style>
  </head>

  <body>
	<div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="taiwan.html">LOGO</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">          
				<ul class="nav navbar-nav navbar-right">
					<li class="active"><a href="location.html">位置</a></li>
					<li><a href="login.html" id="sign">Log in</a></li> 
					<li class="dropdown hide" id="name">
						<a  class="dropdown-toggle" id="Uname" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">User<span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="123.html" id="person">person</a></li>
							<li role="separator" class="divider"></li>
							<li><a id="out">Log out</a></li>
						</ul>
					</li>
				</ul>		 
			</div>
          </div>
        </nav>

      </div>
    </div>	
	
 <div class="container">	
	 <!--Dynamic Tabs-->
	<div class="o-wrapper" id="o-wrapper">
	
    <div class="row">
      <div class="col-xs-12 ">
        	<div class="sidebar">
			<div class="inner-block widget">
			<div class="author-box">
				<div class="text-center">
					<a rel="author" class="author" >
						<img alt="er201024" class="avatar img-circle" id="authorP" src="https://d3kjtz7uyul5bi.cloudfront.net/assets/default/default_avatar-1f70d6bebb0559fd2233ee49343a8f1e847c2e8a7bf394f743962a2863c54f1d.png" width="80" height="80" />
						<span itemprop="author" class="author" id="author">使用者</span>
					</a>    
				</div>				
				<ul class="stats-tabs clearfix" id ="Ucount">
					<li >
						<a id="Upost" onclick="getElementById('under').innerHTML='post';">
							貼文
						</a>        
					</li>
					<li>
						<a id="Ulike" onclick="getElementById('under').innerHTML='like';">
							收藏
						</a>        
					</li>					
					<li>
						<a id="Urank" onclick="getElementById('under').innerHTML='rank';">
							成就
						</a>        
					</li>
				</ul> 				
			</div>			
			</div>	
			</div>	
			
      </div>
<!--	  
      <div class="col-xs-12 ">
        <ul class="user-navi clearfix semantic-navigation" id="sub_navigation">
			<li id="user-recipes" class="active"><a href=""><span>貼文</span></a></li>
			<li id="user-favorites"><a href=""><span>收藏</span></a></li>
			<li id="user-dishes"><a href=""><span>成就</span></a></li>
			</ul>

			<div class="inner-block clearfix">
			  <div class="row">
				  <div class="row no-content">
					<div class="col-xs-12 col-sm-10 col-lg-9">
						<p>目前沒有任何新的感想和收藏喔，趕快去 <a href="/recipes/new?ref=users">發表新感想</a> 吧！</p>
					</div>
				  </div>
			  </div>
			</div>		
	  </div>
-->   <div class="col-xs-12 ">
        	<div class="sidebar">
			<div class="inner-block widget">
				<p id="under">目前沒有任何新的感想和收藏喔，趕快去發表新感想吧！</p>			
			</div>			
			</div>
			<div id="map_canvas">
				<div id="mapdiv" style="width:auto; background-color:#FFFFFF; height: 500px;"></div>
			</div>			
      </div>
	</div>
  </div>
</div>

	<div class="wrap">
		      
        <div class="progress-radial progress-40" id="northprogress">
          <div class="overlay" id="north"></div>
          <div class="overlay1">北</div>
        </div>
		
        <div class="progress-radial progress-50" id="mid1progress">
          <div class="overlay" id="mid1">50%</div>
          <div class="overlay1">中</div>
        </div>

        <div class="progress-radial progress-75">
          <div class="overlay">75%</div>
          <div class="overlay1">南</div>
        </div>

        <div class="progress-radial progress-90">
          <div class="overlay">90%</div>
          <div class="overlay1">東</div>
        </div>
      
    </div>

	<!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="https://getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
	<script  src="js/sign.js"></script>
	<!--<script type="text/javascript">	
	function thehash(){
		return location.hash;
	}
	(function(){  				
		firebase.auth().onAuthStateChanged(firebaseUser =>{
		var myhash = thehash().split('#');
		var Ref = firebase.database().ref('user/' + myhash[1]);
		Ref.on("value", function(snapshot) {
				document.getElementById("author").innerHTML = snapshot.val().displayName;  
				document.getElementById("authorP").src = snapshot.val().photo;
			});
		document.getElementById("Ucount").classList.add("hide");
		
		if(firebaseUser){		
			var uid = firebase.auth().currentUser.uid;			
			if(uid==myhash[1]){
				document.getElementById("Ucount").classList.remove("hide");
			}/*			
*/		}
		});		
	}());	
	</script>-->
	<script>
  // Initialize Firebase
    var person = [];
	//假設縣市有去過的幾個工廠
	var rank =[0,0,5,5,0,5,5,5,5,5,5,5,0,0,0,0,5,0,0];
	var taiwan =['TW-KEE','TW-TPE','TW-TPQ','TW-TAO','TW-HSZ','TW-MIA','TW-TXQ','TW-CHA','TW-YUN','TW-NAN','TW-CYQ','TW-TNQ','TW-KHQ','TW-PIF','TW-TTT','TW-HUA','TW-ILA','TW-PEN','TW-1676511'];
	//database 的縣市順序
	var num=[7,10,4,15,12,0,18,5,9,17,13,6,11,1,14,3,2,16,8];
	//綠色由淺到深十種等級	
	var bluecolor = ['d5f6e3','abedc8','82e3ac','58da90','2dcc71','29bc69','209252','1c7d46','12542f','092a17'];
	
	
		var map;
		function writeDevInfo(event) {
		    document.getElementById("devInfo").innerHTML = event.str;
		}
		AmCharts.ready(function() {
		    map = new AmCharts.AmMap();

		    map.balloon.color = "#000000";
			//var icon= "M21.25,8.375V28h6.5V8.375H21.25zM12.25,28h6.5V4.125h-6.5V28zM3.25,28h6.5V12.625h-6.5V28z";
		    
			var dataProvider = {
		        mapVar: AmCharts.maps.taiwanHigh,
		        getAreasFromMap:true,
				};

			    map.dataProvider = dataProvider;

			    map.areasSettings = {
			        autoZoom: false,
			        colorSolid:"#3C3C3C",
			        rollOverOutlineColor:"#484891",//border 
			        unlistedAreasAlpha:0,
			        rollOverColor:"#FFFCEC",
			        color:"#39A0ED",// map color
			        selectedColor:"#3C3C3C",
			        selectedOutlineColor:"#FFFF6F"
			    };

			    //map.smallMap = new AmCharts.SmallMap();
				map.developerMode = true;
			    map.addListener("writeDevInfo", writeDevInfo);
			    map.write("mapdiv");
				
				 $("#mapdiv").css("background-color","#AAAAAA");

			});
	
	
	firebase.database().ref("area").on('value', function(data) {
	  
	var i =0;
	$.each(data.val(),function(k,v){
		var colorrank = Math.round((rank[num[i]]/(v.end-v.start))*10);
		//console.log(colorrank);
		changeColor(taiwan[num[i]],colorrank);
		i++;
	    })
		$("#mapdiv").css("background-color","#FFFFFF");
	});
	function changeColor(idname,colorrank) {

		// update 台灣縣市 color in data
		var area = map.getObjectById(idname);
		area.color = '#'+ bluecolor[colorrank];
		area.colorReal = bluecolor[colorrank];
		// make the chart take in new color
		area.validate();
		//新竹市和嘉義市連動
		if(idname == 'TW-HSZ'){       	
		changeColor("TW-HSQ",colorrank);
		}else if(idname == 'TW-CYQ'){
		changeColor("TW-CYI",colorrank);
		}
	}

	//progress 北部
	var north = Math.round((rank[0]+rank[1]+rank[2]+rank[3]+rank[4])/37*100);
	document.getElementById("north").innerHTML=north+'%';
	if (north==0) {
		document.getElementById('northprogress').className = 'progress-radial progress-0'; 
	}
	else if(north<8&north>0){
		document.getElementById('northprogress').className = 'progress-radial progress-5'; 
	}
	else if(north<13&north>7){
		document.getElementById('northprogress').className = 'progress-radial progress-10'; 
	}
	else if(north<18&north>12){
		document.getElementById('northprogress').className = 'progress-radial progress-15'; 
	}
	else if(north<23&north>17){
		document.getElementById('northprogress').className = 'progress-radial progress-20'; 
	}
	else if(north<28&north>22){
		document.getElementById('northprogress').className = 'progress-radial progress-25'; 
	}
	else if(north<33&north>27){
		document.getElementById('northprogress').className = 'progress-radial progress-30'; 
	}
	else if(north<38&north>32){
		document.getElementById('northprogress').className = 'progress-radial progress-35'; 
	}
	else if(north<43&north>37){
		document.getElementById('northprogress').className = 'progress-radial progress-40'; 
	}
	else if(north<48&north>42){
		document.getElementById('northprogress').className = 'progress-radial progress-45'; 
	}
	else if(north<53&north>47){
		document.getElementById('northprogress').className = 'progress-radial progress-50'; 
	}
	else if(north<58&north>52){
		document.getElementById('northprogress').className = 'progress-radial progress-55'; 
	}
	else if(north<63&north>57){
		document.getElementById('northprogress').className = 'progress-radial progress-60'; 
	}
	else if(north<68&north>62){
		document.getElementById('northprogress').className = 'progress-radial progress-65'; 
	}
	else if(north<73&north>67){
		document.getElementById('northprogress').className = 'progress-radial progress-70'; 
	}
	else if(north<78&north>72){
		document.getElementById('northprogress').className = 'progress-radial progress-75'; 
	}
	else if(north<83&north>77){
		document.getElementById('northprogress').className = 'progress-radial progress-80'; 
	}
	else if(north<88&north>82){
		document.getElementById('northprogress').className = 'progress-radial progress-85'; 
	}
	else if(north<93&north>87){
		document.getElementById('northprogress').className = 'progress-radial progress-90'; 
	}
	else if(north<100&north>92){
		document.getElementById('northprogress').className = 'progress-radial progress-95'; 
	}
	else if(north==100){
		document.getElementById('northprogress').className = 'progress-radial progress-100'; 

	}

//progress 中部
	var mid1 = Math.round((rank[5]+rank[6]+rank[7]+rank[8]+rank[9]+rank[10])/55*100);
	document.getElementById("mid1").innerHTML=mid1+'%';
	if (mid1==0) {
		document.getElementById('mid1progress').className = 'progress-radial progress-0'; 
	}
	else if(mid1<8&mid1>0){
		document.getElementById('mid1progress').className = 'progress-radial progress-5'; 
	}
	else if(mid1<13&mid1>7){
		document.getElementById('mid1progress').className = 'progress-radial progress-10'; 
	}
	else if(mid1<18&mid1>12){
		document.getElementById('mid1progress').className = 'progress-radial progress-15'; 
	}
	else if(mid1<23&mid1>17){
		document.getElementById('mid1progress').className = 'progress-radial progress-20'; 
	}
	else if(mid1<28&mid1>22){
		document.getElementById('mid1progress').className = 'progress-radial progress-25'; 
	}
	else if(mid1<33&mid1>27){
		document.getElementById('mid1progress').className = 'progress-radial progress-30'; 
	}
	else if(mid1<38&mid1>32){
		document.getElementById('mid1progress').className = 'progress-radial progress-35'; 
	}
	else if(mid1<43&mid1>37){
		document.getElementById('mid1progress').className = 'progress-radial progress-40'; 
	}
	else if(mid1<48&mid1>42){
		document.getElementById('mid1progress').className = 'progress-radial progress-45'; 
	}
	else if(mid1<53&mid1>47){
		document.getElementById('mid1progress').className = 'progress-radial progress-50'; 
	}
	else if(mid1<58&mid1>52){
		document.getElementById('mid1progress').className = 'progress-radial progress-55'; 
	}
	else if(mid1<63&mid1>57){
		document.getElementById('mid1progress').className = 'progress-radial progress-60'; 
	}
	else if(mid1<68&mid1>62){
		document.getElementById('mid1progress').className = 'progress-radial progress-65'; 
	}
	else if(mid1<73&mid1>67){
		document.getElementById('mid1progress').className = 'progress-radial progress-70'; 
	}
	else if(mid1<78&mid1>72){
		document.getElementById('mid1progress').className = 'progress-radial progress-75'; 
	}
	else if(mid1<83&mid1>77){
		document.getElementById('mid1progress').className = 'progress-radial progress-80'; 
	}
	else if(mid1<88&mid1>82){
		document.getElementById('mid1progress').className = 'progress-radial progress-85'; 
	}
	else if(mid1<93&mid1>87){
		document.getElementById('mid1progress').className = 'progress-radial progress-90'; 
	}
	else if(mid1<100&mid1>92){
		document.getElementById('mid1progress').className = 'progress-radial progress-95'; 
	}
	else if(mid1==100){
		document.getElementById('mid1progress').className = 'progress-radial progress-100'; 
	}
	</script>
  </body>
</html>
